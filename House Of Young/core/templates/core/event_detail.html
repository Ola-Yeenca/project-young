{% extends 'core/base.html' %}

{% block title %}{{ event.title }}{% endblock %}

{% block scripts %}
{% comment %} threejs link {% endcomment %}
<script src='https://cdnjs.cloudflare.com/ajax/libs/three.js/0.160.0/three.min.js'></script>

<script>
  const webgel = '{{ webgel | safe }}';
  if (webgel.trim() !== '') {
    const parsedData = JSON.parse(webgel);
    console.log(parsedData);
  } else {
    console.error('The webgel variable is empty.');
  }
</script>
{% endblock %}

{% block content %}
<div id="webgel">
  <div class="section__container explore__container">
    <div class="explore__header">
      <h2 class="section__header">{{ event.title }}</h2>
      {% if event.image %}
        <img src="{{ event.image.url }}" alt="{{ event.title }} Image" class="w-full h-32 object-cover mb-4">
      {% endif %}
    </div>

    <div class="explore__grid">
      <p>{{ event.description }}</p>
      <p>Date: {{ event.event_date }}</p>
      <p>Organizer: {{ event.organizer.name }}</p>
      <p>Venue: {{ event.venue.address }}, {{ event.venue.city }}, {{ event.venue.country }}</p>
      <p>Tickets available: {{ event.tickets_available }}</p>
      <p>Ticket price: â‚¬{{ event.ticket_price }}</p>
    </div>
  </div>

  <div class="section__container explore__container">
    <h3 class="section__header">Related Events</h3>
    <div class="explore__grid">
      {% for related_event in related_events %}
        <div class="related-event">
          <img src="{{ related_event.image.url }}" alt="{{ related_event.title }}">
          <h4 class="text-xl font-semibold mb-2">{{ related_event.title }}</h4>
          <p class="text-gray-500">{{ related_event.description }}</p>
        </div>
      {% endfor %}
    </div>
  </div>

  <div class="section__container explore__container">
    <h3 class="section__header">Related Blogs</h3>
    <div class="explore__grid">
      {% for blog in blogs %}
        <div class="related-blog">
          <img src="{{ blog.image.url }}" alt="{{ blog.title }}">
          <h4 class="text-xl font-semibold mb-2">{{ blog.title }}</h4>
          <p class="text-gray-500">{{ blog.content }}</p>
        </div>
      {% endfor %}
    </div>
  </div>

  <div class="section__container explore__container">
    <h3 class="section__header">Collaborators</h3>
    <div class="explore__grid">
      {% for collaborator in collaborators %}
        <p class="text-gray-500">{{ collaborator.user.username }} - {{ collaborator.organizer.name }}</p>
      {% endfor %}
    </div>
  </div>

  <div class="section__container explore__container">
    <h3 class="section__header">Sponsors</h3>
    <div class="explore__grid">
      {% for sponsor in sponsors %}
        <p>{{ sponsor.name }} - {{ sponsor.description }}</p>
      {% endfor %}
    </div>
  </div>
</div>
{% endblock %}
